export { default as theme } from './slides-theme';
import { Appear } from 'mdx-deck'
import { CodeSurfer } from "mdx-deck-code-surfer";
import vsDark from "prism-react-renderer/themes/vsDark";
import { FullScreenCode } from 'mdx-deck/layouts'

<img src="https://www.sytac.io/wp-content/uploads/2017/11/logo.svg"/>

# React tips and tricks
---
# What this talk about?

> We want to show you a few tips, tricks, patterns, etc. that will help you in your day work
---
# Are you ready?

<div style={{ marginTop: 80 }}>
  <img src="https://media.giphy.com/media/A7BrncpC2Z8Ws/giphy.gif" />
</div>
---
# Keys

<div style={{ marginTop: 80 }}>
  <img src='https://media.giphy.com/media/OTnDHCCFNZHwc/giphy.gif' />
</div>

---
## Why keys in React are so important?

<ul style={{ marginTop: 100, textAlign: 'left' }}>
  <Appear>
    <li>Help reconciler algorithm</li>
    <li>Identify which items have changed, are added, or are removed.</li>
    <li>Should be unique among their siblings</li>
  </Appear>
</ul>
---
<CodeSurfer
  title="Example 1"
  code={require("!raw-loader!./src/cases/1/example.js")}
  lang="javascript"
  showNumbers
  theme={vsDark}
  steps={[
    {},
    { range: [6, 8], notes: "state" },
    { range: [16, 34], notes: "render" },
    { tokens: { 30: [4, 5, 6, 7 , 8,] }, notes: "Button handler" },
    { range: [10, 14], notes: "Add a new list item to the state" },
  ]}
/>
---
# Demo Example 1
---
# How to run it?

* `git clone https://github.com/JonatanGarciaClavo/slab-react-tips-and-tricks.git`
* `cd slab-react-tips-and-tricks`
* `npm install` or `yarn install`
* `npm run start` or `yarn start`

---
## Exercise 1

1. 🔎 Check and analyze code
2. 👀 Check when click in both buttons how DOM it is updated
3. ❌ Detect why when click first bottom all our list items get updated
4. ✅ Fix problem and check again that DOM updates are right
5. ❓ Why it was working for one button and it wasn't for the other?
---
# HOCs

<div style={{ marginTop: 80 }}>
  <img src='https://media.giphy.com/media/7XjITjlQqA5he/giphy.gif' />
</div>
---
## What the hell are HOCs?

<ul style={{ marginTop: 100, textAlign: 'left' }}>
  <Appear>
    <li>It is a function that takes a component and returns a new component</li>
    <li>Principal use is for reusing component logic</li>
  </Appear>
</ul>
---
## HOCs tips

<ul style={{ marginTop: 100, textAlign: 'left' }}>
  <Appear>
    <li><b>Don’t Mutate</b> the Original Component. Use Composition</li>
    <li><b>Pass Unrelated Props</b> Through to the Wrapped Component</li>
    <li><b>Maximizing Composability</b> aka use extra params if you need it</li>
    <li><b>Don’t Use</b> HOCs <b>inside the render Method</b></li>
    <li><b>Refs Aren’t Passed Through</b>(use React.forwardRef)</li>
  </Appear>
</ul>
---
# Demo Example 2
---
## Exercise 2

What we try to accomplish in this exercise it is build 2 HOC that help us with repetitive behavior of our components. We need a component that will display a list of characters and a button that will handle when display or not title in our list
---
# Virtualize your heavy lists

<div style={{ marginTop: 80 }}>
  <img src='http://forgifs.com/gallery/d/264720-2/Old-man-smartphone-scrolling.gif' />
</div>
---
## Dealing with loooooong lists?

<ul style={{ marginTop: 100, textAlign: 'left' }}>
  <Appear>
    <li>Pagination</li>
    <li>Infinite Scrolling</li>
  </Appear>
</ul>
---

## But what if that's not an option?

<div style={{ marginTop: 40 }}>... or small lists but components really big.</div>
<a 
  style={{ marginTop: 40, display: 'block' }}
  href="https://bvaughn.github.io/react-virtualized/#/components/List" 
  target="_blank"
>Virtualize your lists 👉</a>
---

## Windowing
<div>Render only what is visible 💡</div>
<div style={{ marginTop: 80 }}>
  <img style={{ width: '60%' }} src='https://cdn-images-1.medium.com/max/1600/1*VuAzFDUG0MQYhGohAZqrMw.jpeg' />
</div>
---
<CodeSurfer
  title="Example 3"
  code={require("!raw-loader!./src/cases/3/example.js")}
  lang="javascript"
  showNumbers
  theme={vsDark}
  steps={[
    {},
    { range: [6, 8], notes: "generate list of 5000 personas" },
    { range: [35, 37], notes: "render" },
    { range: [21, 29], notes: "Virtualized grid component" },
    { range: [15, 17], notes: "Cell renderer function" },
  ]}
/>
---
## Exercise 3

<div style={{fontSize: '36px'}}>
The purpose of this exercise is to implement a virtualized version for the list that we display
<ol style={{textAlign: 'left'}}>
<li>📥 Import the required elements from the 'react-virtualized' library</li>
<li>🏗 Recreate the list we actually have with the new virtualized component. Special attention for the rowRenderer method</li>
<li>☝️ Replace the list for the new one in the main component.</li>
<li>🎖 Extra bonus points for using the previously created withToggle HOC to build a toggle system to switch between the two lists.</li>
</ol>
</div>
---
# Don't mutate...

<div style={{ marginTop: 40 }}>
  <img src='https://i.giphy.com/media/afWPlDUNXzEPe/giphy.webp' />
  <div style={{fontSize: 20}}>...your data structures!</div>
</div>
---
## Why inmmutable data structures?
<div style={{fontSize: 20}}>Why should you care if JS doesn’t care?</div>

<ul style={{ marginTop: 100, textAlign: 'left' }}>
  <Appear>
    <li>Mutable structures are a reason of trust deficit 🙋‍</li>
    <li>Mutation is a cause of side effects 🙋‍</li>
    <li>Mutation is a cause of unpredictable state 🙋‍</li>
    <li>But ... it reuse the memory and is fast 🤷‍</li>
  </Appear>
</ul>
---
<div>
<a 
  style={{display: 'block'}}
  href="https://facebook.github.io/immutable-js/" 
  target="_blank"
><img src="http://www.webappers.com/img/2015/01/immutable.jpg" /></a>
</div>
---
## Benefits of using immutable.js

<ul style={{ marginTop: 100, textAlign: 'left' }}>
  <Appear>
    <li>Your data structures change predictably ☝️</li>
    <li>Robust data manipulation ✌️</li>
    <li>Concise readable code 👌</li>
  </Appear>
</ul>
---
# Demo Example immutable
(maybe 🤷‍)
---
# Avoid unnecessary reconciliation

<div style={{ marginTop: 80 }}>
  <img src='https://media.giphy.com/media/TioDmIjphpJ5K/giphy.gif' />
</div>
---
## Why avoid unnecessary reconciliation is so important?

<ul style={{ marginTop: 100, textAlign: 'left' }}>
  <Appear>
    <li>Reconciliation is how we call that action that decide when and how to re render DOM</li>
    <li>Nobody wants re render things all time</li>
    <li>Seriously, you don't want to re render your components if their DOM nodes is huge</li>
    <li>Because of that, lets try to help algorithm to take easy and fast decisions</li>
  </Appear>
</ul>
---
## So how we could avoid unnecesary reconciliations?

<ul style={{ marginTop: 100, textAlign: 'left' }}>
  <Appear>
    <li>shouldComponentUpdate()</li>
    <li>PureComponent</li>
    <li>memo</li>
    <li>🚨 Stateless component functions work like React.Components 🚨</li>
  </Appear>
</ul>
---
<CodeSurfer
  title="🚫 Arrow functions"
  code={require("!raw-loader!./slide-examples/avoid-arrow-functions.example")}
  lang="javascript"
  showNumbers
  theme={vsDark}
  steps={[
    { range: [4, 18], notes: "check props" },
    { range: [23, 33], notes: "check props and class function" },
  ]}
/>
---
<CodeSurfer
  title="🚫 Objects and Arrays generation in props"
  code={require("!raw-loader!./slide-examples/avoid-object-array.example")}
  lang="javascript"
  showNumbers
  theme={vsDark}
  steps={[
    { range: [1, 10], notes: "check props" },
    { range: [12, 13], notes: "create a const outside of component" },
    { range: [18, 21], notes: "use previously const as props" },
  ]}
/>
---
<CodeSurfer
  title="🚫 Derived data in render"
  code={require("!raw-loader!./slide-examples/derived-data.example")}
  lang="javascript"
  showNumbers
  theme={vsDark}
  steps={[
    { range: [1, 11] },
    { range: [5, 7], notes: "😱 we are filtering our items each render 😱" },
  ]}
/>
---
# Demo Example 4
---
## Example 4

This exercise it is a bit different compared with other ones, in this case you need to apply all tips and techniques learned before. That means you need to find and identify issues and try to fix it.

🚨 Don't get too crazy, all of them should be pretty obvious after what we learned before 😉
---
# The end

<div style={{ marginTop: 30 }}>
  <img src='https://media.giphy.com/media/l2R0eYcNq9rJUsVAA/giphy.gif' />
</div>

* [https://github.com/JonatanGarciaClavo/slab-react-tips-and-tricks.git](https://github.com/JonatanGarciaClavo/slab-react-tips-and-tricks.git)
* Jonatan García Clavo - [jonatan.garcia@sytac.io](jonatan.garcia@sytac.io)
* Luis Sanchez Gomez - [luis.sanchez@sytac.io](luis.sanchez@sytac.io)